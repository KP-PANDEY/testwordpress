var EGallery=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},function(t,e,i){var n=i(5),r=i(6);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?r(t):e}},function(t,e){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(e)}t.exports=i},function(t,e,i){var n=i(7);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){return(n="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function i(e,n){return t.exports=i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(e,n)}t.exports=i},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(0),r=i.n(n),s=i(1),o=i.n(s),a=i(2),u=i.n(a),l=i(3),c=i.n(l),h=i(4),f=i.n(h),y=function(){function t(e){r()(this,t),this.settings=jQuery.extend(!0,this.getDefaultSettings(),e),this.$container=jQuery(this.settings.container),this.runGallery=this.debounce(this.runGallery.bind(this),300),this.initElements(),this.prepareGallery(),this.bindEvents()}return o()(t,[{key:"getDefaultSettings",value:function(){return{}}},{key:"getItemClass",value:function(t){return this.settings.classesPrefix+t}},{key:"initElements",value:function(){this.elements={$window:jQuery(window)},this.$container.addClass(this.getItemClass(this.settings.classes.container)+" "+this.getItemClass(this.settings.type))}},{key:"bindEvents",value:function(){this.elements.$window.on("resize",this.runGallery)}},{key:"createItem",value:function(t){var e=this.settings.classes,i=jQuery("<div>",{class:this.getItemClass(e.item)}),n=jQuery("<div>",{class:this.getItemClass(e.image)}).css("background-image","url("+t.thumbnail+")");if(i.append(n),t.url){var r=jQuery("<a>",{class:this.getItemClass(e.link),href:t.url});n.wrap(r)}return i}},{key:"debounce",value:function(t,e){var i;return function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var o=this,a=function(){i=null,t.apply(o,r)};clearTimeout(i),i=setTimeout(a,e)}}},{key:"getCurrentBreakpoint",value:function(){var t=Object.keys(this.settings.breakpoints).map(Number).sort(function(t,e){return t-e}),e=0;return t.some(function(t){return innerWidth<t&&(e=t,!0)}),e}},{key:"getCurrentDeviceSetting",value:function(t){var e=this.getCurrentBreakpoint();return e?this.settings.breakpoints[e][t]:this.settings[t]}},{key:"buildGallery",value:function(){var t=this,e=this.settings.items;this.$items=jQuery(),e.forEach(function(e){var i=t.createItem(e);t.$items=t.$items.add(i),t.$container.append(i)})}},{key:"calculateImageSize",value:function(t,e){this.imagesData[e]={width:t.width,height:t.height,ratio:t.width/t.height}}},{key:"loadImages",value:function(){var t=this,e=[];this.imagesData=[],jQuery.each(this.settings.items,function(i){var n=new Image,r=new Promise(function(t){n.onload=t});e.push(r),r.then(function(){return t.calculateImageSize(n,i)}),n.src=t.settings.items[i].thumbnail}),Promise.all(e).then(function(){return t.runGallery()})}},{key:"prepareGallery",value:function(){this.buildGallery(),this.loadImages()}},{key:"runGallery",value:function(){var t=this.$container[0].style;t.setProperty("--hgap",this.getCurrentDeviceSetting("horizontalGap")+"px"),t.setProperty("--vgap",this.getCurrentDeviceSetting("verticalGap")+"px"),t.setProperty("--animation-duration",this.settings.animationDuration+"ms"),this.run()}},{key:"unbindEvents",value:function(){this.elements.$window.off("resize",this.runGallery)}},{key:"destroy",value:function(){this.unbindEvents(),this.$container.empty()}}]),t}(),p=function(t){function e(){return r()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),o()(e,[{key:"getDefaultSettings",value:function(){return{aspectRatio:"16:9"}}},{key:"setItemsPosition",value:function(){var t=this.getCurrentDeviceSetting("columns");this.$items.each(function(e,i){i.style.setProperty("--column",e%t),i.style.setProperty("--row",Math.floor(e/t))})}},{key:"setContainerSize",value:function(){var t=this.getCurrentDeviceSetting("columns"),e=Math.ceil(this.settings.items.length/t),i=this.$container[0].style;i.setProperty("--columns",t),i.setProperty("--rows",e);var n=this.$items.width(),r=this.settings.aspectRatio.split(":"),s=r[1]/r[0],o=(s*n*e+this.getCurrentDeviceSetting("horizontalGap")*(e-1))/this.$container.width()*100;i.setProperty("--aspect-ratio",100*s+"%"),i.setProperty("--container-aspect-ratio",o+"%")}},{key:"run",value:function(){var t=this,e=this.getItemClass(this.settings.classes.animated);this.$container.addClass(e),setTimeout(function(){t.setItemsPosition(),t.setContainerSize(),setTimeout(function(){return t.$container.removeClass(e)},t.settings.animationDuration)},100)}}]),e}(y),g=function(t){function e(){return r()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),o()(e,[{key:"getDefaultSettings",value:function(){return{idealRowHeight:200,lastRow:"normal",breakpoints:{1024:{idealRowHeight:150,lastRow:"fit"},768:{idealRowHeight:100,lastRow:"fit"}}}}},{key:"run",value:function(){this.rowsHeights=[],this.rowsCount=0,this.containerWidth=this.$container.width(),this.makeJustifiedRow(0)}},{key:"makeJustifiedRow",value:function(t){for(var e=0,i=t;;i++){var n=Math.round(this.getCurrentDeviceSetting("idealRowHeight")*this.imagesData[i].ratio);n>this.containerWidth&&(n=this.containerWidth);var r=e+n;if(r>this.containerWidth)if(this.containerWidth-e<r-this.containerWidth){this.fitImagesInContainer(t,i,e),this.rowsCount++,this.makeJustifiedRow(i);break}var s=i===this.settings.items.length-1;if(this.imagesData[i].computedWidth=n,s){var o=this.getCurrentDeviceSetting("lastRow");if("hide"!==o){var a="fit"===o?r:this.containerWidth;this.fitImagesInContainer(t,i+1,a)}this.inflateGalleryHeight();break}e=r}}},{key:"fitImagesInContainer",value:function(t,e,i){for(var n=e-t-1,r=0,s=t;s<e;s++){var o=this.imagesData[s],a=o.computedWidth/i,u=this.$items.get(s),l=this.getItemClass(this.settings.classes.firstRowItem);if(u.style.setProperty("--item-width",a),u.style.setProperty("--gap-count",n),u.style.setProperty("--item-height",o.height/o.width*100+"%"),u.style.setProperty("--item-left",r),u.style.setProperty("--item-row-index",s-t),r+=a,s===t){u.classList.add(l);var c=a*(this.containerWidth-n*this.getCurrentDeviceSetting("horizontalGap"));this.rowsHeights.push(c/o.ratio)}else u.classList.remove(l)}}},{key:"inflateGalleryHeight",value:function(){var t=this.rowsHeights.reduce(function(t,e){return t+e})+this.rowsCount*this.getCurrentDeviceSetting("verticalGap"),e=t/this.containerWidth,i=this.rowsHeights.map(function(e){return e/t*100}),n=-1,r=0;this.$items.each(function(t,e){"0"===e.style.getPropertyValue("--item-row-index")&&++n&&(r+=i[n-1]),e.style.setProperty("--item-top",r+"%"),e.style.setProperty("--item-height",i[n]+"%"),e.style.setProperty("--row",n)}),this.$container[0].style.setProperty("--container-aspect-ratio",e)}}]),e}(y),m=function(t){function e(){return r()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),o()(e,[{key:"run",value:function(){var t=this,e=this.getCurrentBreakpoint();if(e!==this.currentBreakpoint){this.currentBreakpoint=e;var i=[],n=[],r=this.getCurrentDeviceSetting("columns"),s=this.$container.width(),o=(s-this.getCurrentDeviceSetting("horizontalGap")*(r-1))/r;this.$items.each(function(e,s){var a=Math.floor(e/r),u=e%r,l=t.imagesData[e],c=o/l.ratio;s.style.setProperty("--item-height",l.height/l.width*100+"%"),s.style.setProperty("--column",u),a?(n[e]=i[u],i[u]+=c):i.push(c)});var a=Math.max.apply(Math,i),u=i.indexOf(a),l=Math.floor(this.settings.items.length/this.settings.columns),c=this.settings.items.length%this.settings.columns>u?l:l-1,h=a/s;this.$container[0].style.setProperty("--columns",r),this.$container[0].style.setProperty("--highest-column-gap-count",c),this.$container.css("padding-bottom",100*h+"%"),this.$items.each(function(t,e){var i=n[t]?n[t]/a*100:0,s=Math.floor(t/r);e.style.setProperty("--percent-height",i+"%"),e.style.setProperty("--row",s)})}}}]),e}(y);i(8);i.d(e,"default",function(){return d});var d=function(){function t(e){r()(this,t),this.settings=jQuery.extend(!0,this.getDefaultSettings(),e),this.initGalleriesTypes(),this.createGallery()}return o()(t,[{key:"getDefaultSettings",value:function(){return{container:null,type:"grid",columns:5,horizontalGap:10,verticalGap:10,animationDuration:300,classesPrefix:"e-gallery-",classes:{container:"container",item:"item",image:"image",link:"link",firstRowItem:"first-row-item",animated:"-animated"},breakpoints:{1024:{horizontalGap:5,verticalGap:5,columns:4},768:{horizontalGap:1,verticalGap:1,columns:2}}}}},{key:"initGalleriesTypes",value:function(){this.galleriesTypes={grid:p,justified:g,masonry:m}}},{key:"createGallery",value:function(){var t=this.galleriesTypes[this.settings.type];this.galleryHandler=new t(this.settings)}},{key:"destroy",value:function(){this.galleryHandler.destroy()}}]),t}();window.EGallery=d}]).default;
//# sourceMappingURL=e-gallery.min.js.map